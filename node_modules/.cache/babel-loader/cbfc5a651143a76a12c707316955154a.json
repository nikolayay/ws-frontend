{"remainingRequest":"/Users/nikolay/projects/frontend/node_modules/babel-loader/lib/index.js!/Users/nikolay/projects/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nikolay/projects/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nikolay/projects/frontend/src/components/wizard/CreateEntryStepper.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nikolay/projects/frontend/src/components/wizard/CreateEntryStepper.vue","mtime":1556259447019},{"path":"/Users/nikolay/projects/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nikolay/projects/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nikolay/projects/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nikolay/projects/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport _objectSpread from \"/Users/nikolay/projects/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/nikolay/projects/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es7.object.values\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { FormWizard, TabContent, WizardButton } from \"vue-form-wizard\";\nimport \"vue-form-wizard/dist/vue-form-wizard.min.css\";\nimport CreateEntryStepperPosas from \"@/components/wizard/CreateEntryStepperPosas\";\nimport CreateEntryStepperImageUpload from \"@/components/wizard/CreateEntryStepperImageUpload\";\nimport CreateEntryStepperScarInfo from \"@/components/wizard/CreateEntryStepperScarInfo\";\nimport { CREATE_SCAR_MUTATION } from \"@/graphql/mutations\";\nimport { ME_QUERY } from \"@/graphql/queries\";\nexport default {\n  components: {\n    FormWizard: FormWizard,\n    TabContent: TabContent,\n    WizardButton: WizardButton,\n    CreateEntryStepperPosas: CreateEntryStepperPosas,\n    CreateEntryStepperImageUpload: CreateEntryStepperImageUpload,\n    CreateEntryStepperScarInfo: CreateEntryStepperScarInfo\n  },\n  data: function data() {\n    return {\n      me: {},\n      form: {\n        posas: {\n          posas_q1: null,\n          posas_q2: null,\n          posas_q3: null,\n          posas_q4: null,\n          posas_q5: null,\n          posas_q6: null,\n          posas_q7: null\n        },\n        scarInfo: {\n          prevTreatment: \"No\",\n          scarDate: null,\n          causes: null,\n          selected: null,\n          conditions: null\n        },\n        image: null\n      }\n    };\n  },\n  apollo: {\n    me: {\n      query: ME_QUERY\n    }\n  },\n  computed: {\n    bodySiteSubmission: function bodySiteSubmission() {\n      var selected = this.form.scarInfo.selected;\n      return selected ? selected.map(function (el) {\n        return el.id;\n      }) : [];\n    },\n    prevTreatmentSubmission: function prevTreatmentSubmission() {\n      return this.form.scarInfo.prevTreatment === \"Yes\" ? true : false;\n    },\n    posasScoreSubmission: function posasScoreSubmission() {\n      return parseInt(Object.values(this.form.posas).reduce(function (curr, prev) {\n        return curr + prev;\n      }, 0));\n    }\n  },\n  methods: {\n    submitEntry: function () {\n      var _submitEntry = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.$Progress.start(); // create news scar\n\n                _context.next = 3;\n                return this.$apollo.mutate({\n                  mutation: CREATE_SCAR_MUTATION,\n                  variables: _objectSpread({}, this.form.scarInfo, {\n                    prevTreatment: this.prevTreatmentSubmission,\n                    bodySites: this.bodySiteSubmission,\n                    image: this.form.image,\n                    date: new Date(this.form.scarInfo.scarDate),\n                    addedAt: new Date(),\n                    posasScore: this.posasScoreSubmission\n                  })\n                }).then(function () {\n                  _this.$Progress.finish();\n\n                  _this.$toast.open({\n                    message: \"New entry added successfully!\",\n                    type: \"is-success\",\n                    position: \"is-bottom\",\n                    duration: 7000\n                  }); // redirect\n\n\n                  _this.$router.replace(\"/\");\n                }).catch(function () {\n                  _this.$Progress.fail();\n\n                  _this.$toast.open({\n                    message: \"Please fill out all fields.\",\n                    type: \"is-danger\",\n                    position: \"is-bottom\",\n                    duration: 7000\n                  });\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function submitEntry() {\n        return _submitEntry.apply(this, arguments);\n      }\n\n      return submitEntry;\n    }()\n  }\n};",{"version":3,"sources":["CreateEntryStepper.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <form-wizard\n    title=\"Information about your scar\"\n    subtitle=\"Please complete the fields below\"\n    @on-complete=\"submitEntry\"\n    color=\"#ca0000\"\n  >\n    <tab-content class=\"container\" title=\"Information about your scar\">\n      <create-entry-stepper-scar-info :wizard-data=\"form.scarInfo\"></create-entry-stepper-scar-info>\n    </tab-content>\n    <tab-content class=\"container\" ref=\"posasTab\" title=\"Self Assessment\">\n      <create-entry-stepper-posas :wizard-data=\"form.posas\"></create-entry-stepper-posas>\n    </tab-content>\n    <tab-content class=\"container\" title=\"Provide an Image\">\n      <create-entry-stepper-image-upload :wizard-data=\"form\"></create-entry-stepper-image-upload>\n    </tab-content>\n\n    <template slot=\"footer\" slot-scope=\"props\">\n      <div class=\"container\" v-show=\"props.activeTabIndex !== 1\">\n        <wizard-button\n          @click.native=\"props.prevTab()\"\n          v-if=\"props.activeTabIndex > 0\"\n          :style=\"props.fillButtonStyle\"\n          class=\"wizard-footer-left\"\n        >Back</wizard-button>\n\n        <div class=\"wizard-footer-right\">\n          <wizard-button\n            v-if=\"!props.isLastStep\"\n            @click.native=\"props.nextTab()\"\n            :style=\"props.fillButtonStyle\"\n          >Next</wizard-button>\n\n          <wizard-button\n            v-else\n            @click.native=\"submitEntry\"\n            :style=\"props.fillButtonStyle\"\n          >{{props.isLastStep ? 'Done' : 'Next'}}</wizard-button>\n        </div>\n      </div>\n    </template>\n  </form-wizard>\n</template>\n\n<script>\nimport { FormWizard, TabContent, WizardButton } from \"vue-form-wizard\";\nimport \"vue-form-wizard/dist/vue-form-wizard.min.css\";\nimport CreateEntryStepperPosas from \"@/components/wizard/CreateEntryStepperPosas\";\nimport CreateEntryStepperImageUpload from \"@/components/wizard/CreateEntryStepperImageUpload\";\nimport CreateEntryStepperScarInfo from \"@/components/wizard/CreateEntryStepperScarInfo\";\nimport { CREATE_SCAR_MUTATION } from \"@/graphql/mutations\";\nimport { ME_QUERY } from \"@/graphql/queries\";\n\nexport default {\n  components: {\n    FormWizard,\n    TabContent,\n    WizardButton,\n    CreateEntryStepperPosas,\n    CreateEntryStepperImageUpload,\n    CreateEntryStepperScarInfo\n  },\n\n  data: () => {\n    return {\n      me: {},\n      form: {\n        posas: {\n          posas_q1: null,\n          posas_q2: null,\n          posas_q3: null,\n          posas_q4: null,\n          posas_q5: null,\n          posas_q6: null,\n          posas_q7: null\n        },\n        scarInfo: {\n          prevTreatment: \"No\",\n          scarDate: null,\n          causes: null,\n          selected: null,\n          conditions: null\n        },\n        image: null\n      }\n    };\n  },\n\n  apollo: {\n    me: {\n      query: ME_QUERY\n    }\n  },\n\n  computed: {\n    bodySiteSubmission() {\n      const selected = this.form.scarInfo.selected;\n      return selected ? selected.map(el => el.id) : [];\n    },\n    prevTreatmentSubmission() {\n      return this.form.scarInfo.prevTreatment === \"Yes\" ? true : false;\n    },\n    posasScoreSubmission() {\n      return parseInt(\n        Object.values(this.form.posas).reduce((curr, prev) => curr + prev, 0)\n      );\n    }\n  },\n\n  methods: {\n    async submitEntry() {\n      this.$Progress.start();\n\n      // create news scar\n      await this.$apollo\n        .mutate({\n          mutation: CREATE_SCAR_MUTATION,\n          variables: {\n            ...this.form.scarInfo,\n            prevTreatment: this.prevTreatmentSubmission,\n            bodySites: this.bodySiteSubmission,\n            image: this.form.image,\n            date: new Date(this.form.scarInfo.scarDate),\n            addedAt: new Date(),\n            posasScore: this.posasScoreSubmission\n          }\n        })\n        .then(() => {\n          this.$Progress.finish();\n          this.$toast.open({\n            message: \"New entry added successfully!\",\n            type: \"is-success\",\n            position: \"is-bottom\",\n            duration: 7000\n\n          });\n\n          // redirect\n          this.$router.replace(\"/\");\n        })\n        .catch(() => {\n          this.$Progress.fail();\n          this.$toast.open({\n            message: \"Please fill out all fields.\",\n            type: \"is-danger\",\n            position: \"is-bottom\",\n            duration: 7000\n          });\n        });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.container {\n  margin-top: 8px;\n}\n</style>\n"],"sourceRoot":"src/components/wizard"}]}