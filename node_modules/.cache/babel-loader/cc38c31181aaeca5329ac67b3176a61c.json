{"remainingRequest":"/Users/nikolay/new-wounds-scars/frontend/node_modules/thread-loader/dist/cjs.js!/Users/nikolay/new-wounds-scars/frontend/node_modules/babel-loader/lib/index.js!/Users/nikolay/new-wounds-scars/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/nikolay/new-wounds-scars/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nikolay/new-wounds-scars/frontend/src/components/auth/SignUp.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nikolay/new-wounds-scars/frontend/src/components/auth/SignUp.vue","mtime":1556202083174},{"path":"/Users/nikolay/new-wounds-scars/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nikolay/new-wounds-scars/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nikolay/new-wounds-scars/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nikolay/new-wounds-scars/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nikolay/new-wounds-scars/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\nimport _objectSpread from \"/Users/nikolay/new-wounds-scars/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/nikolay/new-wounds-scars/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { SIGNUP_MUTATION } from \"@/graphql/mutations\";\nimport SignUpDemographics from \"@/components/auth/SignUpDemographics\";\nimport Vue from \"vue\";\nimport VeeValidate from \"vee-validate\";\nimport { set } from \"@/session\";\nconsole.log(set);\nVue.use(VeeValidate, {\n  events: \"\"\n});\nexport default {\n  name: \"SignUp\",\n  components: {\n    SignUpDemographics: SignUpDemographics\n  },\n  title: \"Sign Up | \".concat(process.env.VUE_APP_NAME),\n  data: function data() {\n    return {\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      demographics: {\n        dob: null,\n        gender: null,\n        ethnicity: null\n      }\n    };\n  },\n  methods: {\n    signup: function () {\n      var _signup = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        var valid, res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.$validator.validateAll();\n\n              case 2:\n                valid = _context.sent;\n\n                if (!valid) {\n                  _context.next = 9;\n                  break;\n                }\n\n                this.$Progress.start();\n                _context.next = 7;\n                return this.$apollo.mutate({\n                  mutation: SIGNUP_MUTATION,\n                  variables: _objectSpread({\n                    name: this.name,\n                    email: this.email,\n                    password: this.password\n                  }, this.demographics)\n                }).catch(function (_ref) {\n                  var message = _ref.message;\n\n                  _this.$Progress.fail();\n\n                  _this.$toast.open({\n                    message: message,\n                    type: \"is-danger\",\n                    position: \"is-bottom\",\n                    duration: 5000\n                  });\n                });\n\n              case 7:\n                res = _context.sent;\n\n                if (res) {\n                  this.$Progress.finish();\n                  set(res.data.signup.token);\n                  this.$toast.open({\n                    message: \"Sign up successful!\",\n                    type: \"is-success\",\n                    position: \"is-bottom\",\n                    duration: 5000\n                  });\n                  this.$router.replace(\"/\");\n                }\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function signup() {\n        return _signup.apply(this, arguments);\n      }\n\n      return signup;\n    }()\n  }\n};",{"version":3,"sources":["SignUp.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA,SAAA,eAAA,QAAA,qBAAA;AACA,OAAA,kBAAA,MAAA,sCAAA;AACA,OAAA,GAAA,MAAA,KAAA;AACA,OAAA,WAAA,MAAA,cAAA;AACA,SAAA,GAAA,QAAA,WAAA;AACA,OAAA,CAAA,GAAA,CAAA,GAAA;AAEA,GAAA,CAAA,GAAA,CAAA,WAAA,EAAA;AACA,EAAA,MAAA,EAAA;AADA,CAAA;AAIA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAEA,EAAA,UAAA,EAAA;AAAA,IAAA,kBAAA,EAAA;AAAA,GAFA;AAGA,EAAA,KAAA,sBAAA,OAAA,CAAA,GAAA,CAAA,YAAA,CAHA;AAIA,EAAA,IAJA,kBAIA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA,EAHA;AAIA,MAAA,YAAA,EAAA;AACA,QAAA,GAAA,EAAA,IADA;AAEA,QAAA,MAAA,EAAA,IAFA;AAGA,QAAA,SAAA,EAAA;AAHA;AAJA,KAAA;AAUA,GAfA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,MADA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEA,KAAA,UAAA,CAAA,WAAA,EAFA;;AAAA;AAEA,gBAAA,KAFA;;AAAA,qBAGA,KAHA;AAAA;AAAA;AAAA;;AAIA,qBAAA,SAAA,CAAA,KAAA;AAJA;AAAA,uBAKA,KAAA,OAAA,CACA,MADA,CACA;AACA,kBAAA,QAAA,EAAA,eADA;AAEA,kBAAA,SAAA;AACA,oBAAA,IAAA,EAAA,KAAA,IADA;AAEA,oBAAA,KAAA,EAAA,KAAA,KAFA;AAGA,oBAAA,QAAA,EAAA,KAAA;AAHA,qBAIA,KAAA,YAJA;AAFA,iBADA,EAUA,KAVA,CAUA,gBAAA;AAAA,sBAAA,OAAA,QAAA,OAAA;;AACA,kBAAA,KAAA,CAAA,SAAA,CAAA,IAAA;;AACA,kBAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA;AACA,oBAAA,OAAA,EAAA,OADA;AAEA,oBAAA,IAAA,EAAA,WAFA;AAGA,oBAAA,QAAA,EAAA,WAHA;AAIA,oBAAA,QAAA,EAAA;AAJA,mBAAA;AAMA,iBAlBA,CALA;;AAAA;AAKA,gBAAA,GALA;;AAyBA,oBAAA,GAAA,EAAA;AACA,uBAAA,SAAA,CAAA,MAAA;AACA,kBAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,MAAA,CAAA,KAAA,CAAA;AACA,uBAAA,MAAA,CAAA,IAAA,CAAA;AACA,oBAAA,OAAA,EAAA,qBADA;AAEA,oBAAA,IAAA,EAAA,YAFA;AAGA,oBAAA,QAAA,EAAA,WAHA;AAIA,oBAAA,QAAA,EAAA;AAJA,mBAAA;AAMA,uBAAA,OAAA,CAAA,OAAA,CAAA,GAAA;AACA;;AAnCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAhBA,CAAA","sourcesContent":["<template>\n  <section class=\"container auth-form box\">\n    <b-field :type=\"{'is-danger': errors.has('name')}\" :message=\"errors.first('name')\" label=\"Name\">\n      <b-input\n        name=\"name\"\n        type=\"name\"\n        v-validate=\"'required|alpha_spaces'\"\n        placeholder=\"Your Name\"\n        v-model=\"name\"\n      ></b-input>\n    </b-field>\n    <b-field\n      :type=\"{'is-danger': errors.has('email')}\"\n      :message=\"errors.first('email')\"\n      label=\"Email\"\n    >\n      <b-input\n        name=\"email\"\n        type=\"email\"\n        v-validate=\"'required|email'\"\n        placeholder=\"Your Email\"\n        v-model=\"email\"\n      ></b-input>\n    </b-field>\n    <b-field\n      :type=\"{'is-danger': errors.has('password')}\"\n      :message=\"errors.first('password')\"\n      label=\"Password\"\n    >\n      <b-input\n        name=\"password\"\n        type=\"password\"\n        password-reveal\n        v-validate=\"'required'\"\n        placeholder=\"Your Password\"\n        v-model=\"password\"\n      ></b-input>\n    </b-field>\n\n    <sign-up-demographics :wizard-data=\"demographics\"/>\n\n    <br>\n    <a @click.prevent=\"signup\" class=\"button is-fullwidth is-primary\">Sign Up</a>\n    <small>\n      Already have an account?\n      <router-link to=\"/login\">Log In.</router-link>\n    </small>\n  </section>\n</template>\n\n<script>\nimport { SIGNUP_MUTATION } from \"@/graphql/mutations\";\nimport SignUpDemographics from \"@/components/auth/SignUpDemographics\";\nimport Vue from \"vue\";\nimport VeeValidate from \"vee-validate\";\nimport { set } from \"@/session\";\nconsole.log(set);\n\nVue.use(VeeValidate, {\n  events: \"\"\n});\n\nexport default {\n  name: \"SignUp\",\n  components: { SignUpDemographics },\n  title: `Sign Up | ${process.env.VUE_APP_NAME}`,\n  data() {\n    return {\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      demographics: {\n        dob: null,\n        gender: null,\n        ethnicity: null\n      }\n    };\n  },\n  methods: {\n    async signup() {\n      const valid = await this.$validator.validateAll();\n      if (valid) {\n        this.$Progress.start();\n        const res = await this.$apollo\n          .mutate({\n            mutation: SIGNUP_MUTATION,\n            variables: {\n              name: this.name,\n              email: this.email,\n              password: this.password,\n              ...this.demographics\n            }\n          })\n          .catch(({ message }) => {\n            this.$Progress.fail();\n            this.$toast.open({\n              message,\n              type: \"is-danger\",\n              position: \"is-bottom\",\n              duration: 5000\n            });\n          });\n\n        if (res) {\n          this.$Progress.finish();\n          set(res.data.signup.token);\n          this.$toast.open({\n            message: \"Sign up successful!\",\n            type: \"is-success\",\n            position: \"is-bottom\",\n            duration: 5000\n          });\n          this.$router.replace(\"/\");\n        }\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.auth-form {\n  max-width: 300px;\n}\na.button {\n  margin-bottom: 5px;\n}\n</style>\n"],"sourceRoot":"src/components/auth"}]}